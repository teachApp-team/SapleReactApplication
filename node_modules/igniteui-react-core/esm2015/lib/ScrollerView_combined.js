/*
THIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT ("AGREEMENT") LOCATED HERE:
https://www.infragistics.com/legal/license/igultimate-la
https://www.infragistics.com/legal/license/igultimate-eula
GOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.
*/
import { Base, runOn, delegateCombine, markType, INotifyPropertyChanged_$type, PropertyChangedEventArgs, enumGetBox, Point_$type } from "./type";
import { CanvasGestureDOMEventProxy } from "./CanvasGestureDOMEventProxy";
import { Brush } from "./Brush";
import { DOMExecutionContext } from "./DOMExecutionContext";
import { DoubleAnimator } from "./DoubleAnimator";
import { Rect } from "./Rect";
import { ScrollbarStyle_$type } from "./ScrollbarStyle";
import { truncate, isNaN_ } from "./number";
import { EasingFunctions } from "./EasingFunctions";
import { ScrollerScrollingEventArgs } from "./ScrollerScrollingEventArgs";
/**
 * @hidden
 */
export let ScrollerView = /*@__PURE__*/ (() => {
    class ScrollerView extends Base {
        constructor(a) {
            super();
            this.c = null;
            this.ad = null;
            this.ah = null;
            this.b = null;
            this.ac = null;
            this.a = null;
            this.ag = null;
            this.ae = null;
            this.af = null;
            this.ai = null;
            this.e = false;
            this.d = null;
            this.i = false;
            this.h = false;
            this.w = 0;
            this.t = 0;
            this.x = -1;
            this.u = -1;
            this.g = false;
            this.f = false;
            this.v = 0;
            this.s = 0;
            this.c = a;
        }
        a8() {
            return ((() => {
                let $ret = new Brush();
                $ret.fill = "#666666";
                return $ret;
            })());
        }
        a0(a) {
            if (a == null) {
                if (this.ad != null) {
                    this.ad = null;
                }
                if (this.a != null) {
                    this.a.ak = null;
                    this.a.aq();
                }
                return;
            }
            this.ad = a;
            this.c.executionContext = new DOMExecutionContext(this.ad);
            let b = Math.round(this.ad.rootWrapper.width());
            let c = Math.round(this.ad.rootWrapper.height());
            this.ag = this.ad.rootWrapper;
            this.ag.setStyleProperty("position", "relative");
            this.ah = this.ad.createElement("div");
            this.ah.setStyleProperty("position", "relative");
            this.ah.setStyleProperty("width", "100%");
            this.ah.setStyleProperty("height", "100%");
            this.ah.setStyleProperty("overflow", "hidden");
            this.ag.append(this.ah);
            this.af = this.ad.createElement("div");
            this.af.setStyleProperty("position", "absolute");
            this.af.setStyleProperty("height", this.c.scrollbarSpan + "px");
            this.af.setStyleProperty("width", this.c.minScrollbarSize + "px");
            this.af.setStyleProperty("background-color", this.c.scrollbarBrush._fill);
            this.af.setStyleProperty("display", "none");
            this.af.setStyleProperty("border-radius", "5px");
            this.af.setStyleProperty("z-index", "10000");
            this.af.setStyleProperty("bottom", "0px");
            this.ag.append(this.af);
            this.ai = this.ad.createElement("div");
            this.ai.setStyleProperty("position", "absolute");
            this.ai.setStyleProperty("width", this.c.scrollbarSpan + "px");
            this.ai.setStyleProperty("height", this.c.minScrollbarSize + "px");
            this.ai.setStyleProperty("background-color", this.c.scrollbarBrush._fill);
            this.ai.setStyleProperty("display", "none");
            this.ai.setStyleProperty("border-radius", "5px");
            this.ai.setStyleProperty("z-index", "10000");
            this.ai.setStyleProperty("right", "0px");
            this.ag.append(this.ai);
            this.a4(false);
            this.ac = this.ah.getNativeElement();
            this.a = new CanvasGestureDOMEventProxy(this.ad.rootWrapper, this.ad, true);
            this.ad.rootWrapper.setProperty("tabIndex", 1000);
            this.ad.rootWrapper.setRawStyleProperty("outline", "none");
            this.a.c2 = true;
            this.a.bp = true;
            let d = this.a;
            d.onMouseWheel = delegateCombine(d.onMouseWheel, runOn(this, this.l));
            let e = this.a;
            e.onMouseWheelHorizontal = delegateCombine(e.onMouseWheelHorizontal, runOn(this, this.m));
            let f = this.a;
            f.onMouseLeave = delegateCombine(f.onMouseLeave, runOn(this, this.aq));
            let g = this.a;
            g.onDragStarted = delegateCombine(g.onDragStarted, runOn(this, this.ap));
            let h = this.a;
            h.onDragDelta = delegateCombine(h.onDragDelta, runOn(this, this.ao));
            let i = this.a;
            i.onDragCompleted = delegateCombine(i.onDragCompleted, runOn(this, this.an));
            let j = this.a;
            j.onFlingStarted = delegateCombine(j.onFlingStarted, runOn(this, this.j));
            let k = this.a;
            k.onContactStarted = delegateCombine(k.onContactStarted, runOn(this, this.am));
            let l = this.a;
            l.onContactMoved = delegateCombine(l.onContactMoved, runOn(this, this.al));
            let m = this.a;
            m.onContactCompleted = delegateCombine(m.onContactCompleted, runOn(this, this.ak));
            this.a.aa = true;
            this.a.am = runOn(this, this.r);
            let n = this.a;
            n.onKeyDown = delegateCombine(n.onKeyDown, runOn(this, this.k));
            this.a.an = (o) => {
                let e_ = o.originalEvent;
                let p = (e_.type);
                if (p == "pointerdown" && !this.a.bl(o)) {
                    return false;
                }
                return true;
            };
            this.c.dc(b, c);
            this.c.horizontalAnimation.u(this.ad);
            this.c.verticalAnimation.u(this.ad);
        }
        k(a) {
            return this.c.ak(a, (this.a.bc & 4) != 0, (this.a.bc & 2) != 0);
        }
        r(a, b, c) {
            if (this.f || this.g) {
                return true;
            }
            if (c || b) {
                return true;
            }
            if (this.n(a, b)) {
                this.c.cx();
                return true;
            }
            else if (this.c.isHorizontalActive) {
                this.c.c1();
            }
            if (this.o(a, b)) {
                this.c.cy();
                return true;
            }
            else if (this.c.isVerticalActive) {
                this.c.c2();
            }
            return false;
        }
        ak(a, b) {
            this.f = false;
            this.g = false;
            this.c.isDraggingVBar = false;
            this.c.isDraggingHBar = false;
        }
        al(a, b) {
            if (this.g) {
                let c = a.y - this.v;
                this.v = a.y;
                this.c.db(c);
            }
            else if (this.f) {
                let d = a.x - this.s;
                this.s = a.x;
                this.c.c9(d);
            }
        }
        am(a, b) {
            this.e = false;
            this.aj();
            let c = this.q(a, b);
            let d = this.p(a, b);
            if (c) {
                this.c.isDraggingVBar = true;
                this.g = true;
                this.v = a.y;
                this.ar();
            }
            else if (d) {
                this.c.isDraggingHBar = true;
                this.f = true;
                this.s = a.x;
                this.ar();
            }
        }
        p(a, b) {
            if (!this.h) {
                return false;
            }
            if (a.y >= this.c.viewportHeight - this.c.scrollbarSpan && a.y <= this.c.viewportHeight && a.x >= this.u - this.t / 2 && a.x <= this.u + this.t / 2) {
                return true;
            }
            return false;
        }
        q(a, b) {
            if (!this.i) {
                return false;
            }
            if (a.x >= this.c.viewportWidth - this.c.scrollbarSpan && a.x <= this.c.viewportWidth && a.y >= this.x - this.w / 2 && a.y <= this.x + this.w / 2) {
                return true;
            }
            return false;
        }
        n(a, b) {
            if (!this.h) {
                return false;
            }
            return a.y >= this.c.viewportHeight - this.c.scrollbarSpan - 40 && a.y <= this.c.viewportHeight;
        }
        o(a, b) {
            if (!this.i) {
                return false;
            }
            return a.x >= this.c.viewportWidth - this.c.scrollbarSpan - 40 && a.x <= this.c.viewportWidth;
        }
        j(a, b, c) {
            this.e = true;
            return true;
        }
        ay(a) {
            this.a.bf = new Rect(0, 0, 0, this.c.viewportWidth, this.c.viewportHeight);
        }
        az(a) {
            this.a.bf = new Rect(0, 0, 0, this.c.viewportWidth, this.c.viewportHeight);
        }
        av(a) {
            if (this.ae != null) {
                this.ae.setStyleProperty("height", a + "px");
            }
        }
        aw(a) {
            if (this.ae != null) {
                this.ae.setStyleProperty("width", a + "px");
            }
        }
        aj() {
        }
        an(a) {
            if (this.f || this.g) {
                return;
            }
            this.e = false;
            this.c.c6(a);
        }
        ao(a) {
            if (this.f || this.g) {
                return;
            }
            this.c.c7(a);
        }
        a6(a) {
            this.ac.scrollTop = truncate(a);
        }
        ap(a) {
            if (this.f || this.g) {
                return;
            }
            this.e = false;
            this.c.c8(a);
        }
        z() {
            return this.ac.scrollLeft;
        }
        aa() {
            return this.ac.scrollTop;
        }
        l(a, b) {
            this.e = false;
            this.aj();
            return this.c.am(a, 0, b);
        }
        m(a, b) {
            this.e = false;
            this.aj();
            return this.c.am(a, b, 0);
        }
        aq(a) {
            if (this.c.horizontalScrollbarStatus > 0) {
                this.c.c1();
            }
            if (this.c.verticalScrollbarStatus > 0) {
                this.c.c2();
            }
        }
        a5(a) {
            this.ac.scrollLeft = truncate(a);
        }
        a1(a) {
            this.ae = a;
            this.ah.append(this.ae);
        }
        a2(a) {
            if (this.ad == null) {
                return;
            }
            if (this.d == null) {
                this.d = this.ad.getRequestAnimationFrame();
            }
            if (this.e) {
                a();
            }
            else {
                this.d(() => a());
            }
        }
        at() {
            if (this.i) {
                this.i = false;
                this.ai.setStyleProperty("display", "none");
            }
        }
        as() {
            if (this.h) {
                this.h = false;
                this.af.setStyleProperty("display", "none");
            }
        }
        a7(a, b) {
            let c = false;
            if (!this.i) {
                c = true;
                this.i = true;
                this.ai.setStyleProperty("display", "block");
            }
            if (a != this.x || c) {
                this.x = a;
                if (this.i) {
                    this.ai.setRawYPosition(a - b / 2);
                }
            }
            if (b != this.w || c) {
                this.w = b;
                if (this.i) {
                    this.ai.setRawSize(this.ab(), b);
                }
            }
        }
        a3(a, b) {
            let c = false;
            if (!this.h) {
                c = true;
                this.h = true;
                this.af.setStyleProperty("display", "block");
            }
            if (a != this.u || c) {
                this.u = a;
                if (this.h) {
                    this.af.setRawXPosition(a - b / 2);
                }
            }
            if (b != this.t || c) {
                this.t = b;
                if (this.h) {
                    this.af.setRawSize(b, this.y());
                }
            }
        }
        a4(a) {
            if (this.af != null && this.ai != null) {
                switch (this.c.scrollbarStyle) {
                    case 0:
                        if (a) {
                            this.af.setStyleProperty("opacity", "1");
                            this.ai.setStyleProperty("opacity", "1");
                            this.af.setRawSize(this.t, this.y());
                            this.ai.setRawSize(this.ab(), this.w);
                        }
                        break;
                    case 1:
                        if (a) {
                            this.af.setRawSize(this.t, this.y());
                            this.ai.setRawSize(this.ab(), this.w);
                        }
                        this.af.setStyleProperty("opacity", this.c.horizontalScrollbarStatus.toString());
                        this.ai.setStyleProperty("opacity", this.c.verticalScrollbarStatus.toString());
                        break;
                    case 2:
                        if (a) {
                            this.af.setStyleProperty("opacity", "1");
                            this.ai.setStyleProperty("opacity", "1");
                        }
                        this.af.setRawSize(this.t, this.y());
                        this.ai.setRawSize(this.ab(), this.w);
                        break;
                }
            }
        }
        y() {
            if (this.c.scrollbarStyle == 2) {
                return this.c.horizontalScrollbarStatus * (this.c.scrollbarSpan - 2) + 2;
            }
            return this.c.scrollbarSpan;
        }
        ab() {
            if (this.c.scrollbarStyle == 2) {
                return this.c.verticalScrollbarStatus * (this.c.scrollbarSpan - 2) + 2;
            }
            return this.c.scrollbarSpan;
        }
        ar() {
            this.ad.rootWrapper.focus(true);
        }
        ax() {
            if (this.a != null) {
                this.a.bb(this.ad.rootWrapper, "");
            }
        }
        au() {
            if (this.a != null) {
                this.a.ap(this.ad.rootWrapper, "");
            }
        }
    }
    ScrollerView.$t = /*@__PURE__*/ markType(ScrollerView, 'ScrollerView');
    return ScrollerView;
})();
/**
 * @hidden
 */
export let Scroller = /*@__PURE__*/ (() => {
    class Scroller extends Base {
        constructor() {
            super();
            this.bb = 49;
            this._keyboardListener = null;
            this.a3 = NaN;
            this.ax = 49;
            this.av = NaN;
            this.ba = 48;
            this.a2 = NaN;
            this.aw = 48;
            this.au = NaN;
            this.a0 = 0;
            this.a4 = 20;
            this.a7 = 8;
            this.bd = 0;
            this.dr = null;
            this.v = false;
            this.az = 0;
            this.bf = 0;
            this.be = 0;
            this.a9 = 0;
            this.a8 = 0;
            this.f = null;
            this.t = true;
            this.y = false;
            this.ay = 0;
            this.at = 0;
            this.c = 0;
            this.a1 = 0;
            this.bc = 0;
            this.h = null;
            this.i = null;
            this.bo = 0;
            this.bz = 0;
            this.bp = 0;
            this.b0 = 0;
            this._executionContext = null;
            this._isDraggingVBar = false;
            this._isDraggingHBar = false;
            this.q = false;
            this.o = false;
            this.p = false;
            this.dt = null;
            this.n = false;
            this.propertyChanged = null;
            this.onScrolling = null;
            this.a5 = 0;
            this.a6 = 0;
            this.u = false;
            this.b5 = 500;
            this.b6 = 0;
            this.b7 = 0;
            this.m = false;
            this.x = false;
            this.l = false;
            this.w = false;
            this.r = true;
            this.s = true;
            this.dr = this.view.a8();
            this.h = new DoubleAnimator(0, 1, 400);
            this.i = new DoubleAnimator(0, 1, 400);
            this.h.b = EasingFunctions.cubicEase;
            this.i.b = EasingFunctions.cubicEase;
            let a = this.h;
            a.propertyChanged = delegateCombine(a.propertyChanged, runOn(this, this.cv));
            let b = this.i;
            b.propertyChanged = delegateCombine(b.propertyChanged, runOn(this, this.cw));
        }
        get smallVerticalChange() {
            return this.bb;
        }
        set smallVerticalChange(a) {
            let b = this.bb;
            this.bb = a;
            if (b != this.bb) {
                this.da("SmallVerticalChange", b, this.bb);
            }
        }
        get keyboardListener() {
            return this._keyboardListener;
        }
        set keyboardListener(a) {
            this._keyboardListener = a;
        }
        get largeVerticalChange() {
            return this.a3;
        }
        set largeVerticalChange(a) {
            let b = this.a3;
            this.a3 = a;
            if (b != this.a3) {
                this.da("LargeVerticalChange", b, this.a3);
            }
        }
        get bk() {
            return this.ax;
        }
        set bk(a) {
            let b = this.ax;
            this.ax = a;
            if (b != this.ax) {
                this.da("ActualSmallVerticalChange", b, this.ax);
            }
        }
        get bi() {
            return this.av;
        }
        set bi(a) {
            let b = this.av;
            this.av = a;
            if (b != this.av) {
                this.da("ActualLargeVerticalChange", b, this.av);
            }
        }
        get smallHorizontalChange() {
            return this.ba;
        }
        set smallHorizontalChange(a) {
            let b = this.ba;
            this.ba = a;
            if (b != this.ba) {
                this.da("SmallHorizontalChange", b, this.ba);
            }
        }
        get largeHorizontalChange() {
            return this.a2;
        }
        set largeHorizontalChange(a) {
            let b = this.a2;
            this.a2 = a;
            if (b != this.a2) {
                this.da("LargeHorizontalChange", b, this.a2);
            }
        }
        get bj() {
            return this.aw;
        }
        set bj(a) {
            let b = this.aw;
            this.aw = a;
            if (b != this.aw) {
                this.da("ActualSmallHorizontalChange", b, this.aw);
            }
        }
        get bh() {
            return this.au;
        }
        set bh(a) {
            let b = this.au;
            this.au = a;
            if (b != this.au) {
                this.da("ActualLargeHorizontalChange", b, this.au);
            }
        }
        get contentWidth() {
            return this.a0;
        }
        set contentWidth(a) {
            let b = this.a0;
            this.a0 = a;
            if (b != this.a0) {
                this.da("ContentWidth", b, this.a0);
            }
        }
        get minScrollbarSize() {
            return this.a4;
        }
        set minScrollbarSize(a) {
            let b = this.a4;
            this.a4 = a;
            if (b != this.a4) {
                this.da("MinScrollbarSize", b, this.a4);
            }
        }
        get scrollbarSpan() {
            return this.a7;
        }
        set scrollbarSpan(a) {
            let b = this.a7;
            this.a7 = a;
            if (b != this.a7) {
                this.da("ScrollbarSpan", b, this.a7);
            }
        }
        ak(a, b, c) {
            switch (a) {
                case 11: return this.an(b, c);
                case 10: return this.ao(b, c);
                case 17: return this.ae(b, c);
                case 15: return this.ar(b, c);
                case 14: return this.al(b, c);
                case 16: return this.ap(b, c);
                case 13: return this.aj(b, c);
                case 12: return this.af(b, c);
                case 2: return this.aq(b, c);
                case 3: return this.ag(b, c);
                case 8: return this.ah();
                case 57: return this.ai();
            }
            return false;
        }
        ai() {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onF2()) {
                    return true;
                }
            }
            return false;
        }
        ah() {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onEscape()) {
                    return true;
                }
            }
            return false;
        }
        aq(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onTab(a, b)) {
                    return true;
                }
            }
            return false;
        }
        af(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onEnd(a, b)) {
                    return true;
                }
            }
            return false;
        }
        aj(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onHome(a, b)) {
                    return true;
                }
            }
            return false;
        }
        ap(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onRightArrow(a, b)) {
                    return true;
                }
            }
            if (this.scrollLeft + this.viewportWidth >= this.contentWidth) {
                return false;
            }
            this.dh(this.bj, 0);
            return true;
        }
        al(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onLeftArrow(a, b)) {
                    return true;
                }
            }
            if (this.scrollLeft <= 0) {
                return false;
            }
            this.dh(this.bj * -1, 0);
            return true;
        }
        ar(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onUpArrow(a, b)) {
                    return true;
                }
            }
            if (this.scrollTop <= 0) {
                return false;
            }
            this.dh(0, this.bk * -1);
            return true;
        }
        ae(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onDownArrow(a, b)) {
                    return true;
                }
            }
            if (this.scrollTop + this.viewportHeight >= this.contentHeight) {
                return false;
            }
            this.dh(0, this.bk);
            return true;
        }
        ao(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onPageUp(a, b)) {
                    return true;
                }
            }
            if (this.scrollTop < 0) {
                return false;
            }
            this.dh(0, this.bi * -1);
            return true;
        }
        an(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onPageDown(a, b)) {
                    return true;
                }
            }
            if (this.scrollTop + this.viewportHeight >= this.contentHeight) {
                return false;
            }
            this.dh(0, this.bi);
            return true;
        }
        ag(a, b) {
            if (this.keyboardListener != null) {
                if (this.keyboardListener.onEnter(a, b)) {
                    return true;
                }
            }
            return false;
        }
        get verticalTrackStartInset() {
            return this.bd;
        }
        set verticalTrackStartInset(a) {
            let b = this.bd;
            this.bd = a;
            if (b != this.bd) {
                this.da("VerticalTrackStartInset", b, this.bd);
            }
        }
        get scrollbarBrush() {
            return this.dr;
        }
        set scrollbarBrush(a) {
            let b = this.dr;
            this.dr = a;
            if (b != this.dr) {
                this.da("ScrollbarBrush", b, this.dr);
            }
        }
        da(a, b, c) {
            if (this.propertyChanged != null) {
                this.propertyChanged(this, new PropertyChangedEventArgs(a));
            }
            this.dd(a, b, c);
        }
        get as() {
            return this.v;
        }
        set as(a) {
            this.v = a;
            if (!this.v) {
                this.view.a6(this.scrollTop);
                this.view.a5(this.scrollLeft);
            }
        }
        dd(a, b, c) {
            switch (a) {
                case "ContentWidth":
                    this.view.aw(this.contentWidth);
                    let d = c;
                    let e = b;
                    if (d < e && this.scrollLeft + this.viewportWidth >= d) {
                        this.di(d - (this.scrollLeft + this.viewportWidth), 0);
                    }
                    this.dn();
                    break;
                case "ContentHeight":
                    this.view.av(this.contentHeight);
                    let f = c;
                    let g = b;
                    if (f < g && this.scrollTop > 0 && this.scrollTop + this.viewportHeight >= f) {
                        this.di(0, f - (this.scrollTop + this.viewportHeight));
                    }
                    this.dq();
                    break;
                case "ScrollTop":
                    if (!this.as) {
                        this.view.a6(this.scrollTop);
                    }
                    break;
                case "ScrollLeft":
                    if (!this.as) {
                        this.view.a5(this.scrollLeft);
                    }
                    break;
                case "ViewportWidth":
                    this.view.az(this.viewportWidth);
                    if (isNaN_(this.largeVerticalChange)) {
                        this.bh = this.viewportWidth;
                    }
                    if (this.contentWidth > 0 && this.scrollLeft + this.viewportWidth > this.contentWidth) {
                        this.di(this.contentWidth - this.viewportWidth - this.scrollLeft, 0);
                    }
                    this.dn();
                    if (this.view.z() != this.scrollLeft) {
                        this.view.a5(this.scrollLeft);
                    }
                    break;
                case "ViewportHeight":
                    this.view.ay(this.viewportHeight);
                    if (isNaN_(this.largeVerticalChange)) {
                        this.bi = this.viewportHeight;
                    }
                    this.dq();
                    if (this.view.aa() != this.scrollTop) {
                        this.view.a6(this.scrollTop);
                    }
                    break;
                case "ScrollbarBrush":
                case "ScrollbarSpan":
                case "MinScrollbarSize":
                case "VerticalTrackStartInset":
                    this.dq();
                    this.dn();
                    break;
                case "HorizontalScrollbarStatus":
                case "VerticalOpacity":
                    this.view.a4(false);
                    break;
                case "ScrollbarStyle":
                    this.view.a4(true);
                    break;
            }
        }
        get contentHeight() {
            return this.az;
        }
        set contentHeight(a) {
            let b = this.az;
            this.az = a;
            if (b != this.az) {
                this.da("ContentHeight", b, this.az);
            }
        }
        db(a) {
            let b = Math.max(this.minScrollbarSize, this.actualVerticalScrollbarHeight);
            let c = this.verticalTrackStartInset + (b / 2);
            let d = this.viewportHeight - (b / 2);
            let e = a / (d - c);
            let f = e * (this.contentHeight - this.viewportHeight);
            this.dh(0, f);
        }
        c9(a) {
            let b = Math.max(this.minScrollbarSize, this.actualHorizontalScrollbarWidth);
            let c = 0 + (b / 2);
            let d = this.viewportWidth - (b / 2);
            let e = a / (d - c);
            let f = e * (this.contentWidth - this.viewportWidth);
            this.dh(f, 0);
        }
        dc(a, b, c = false) {
            let d = this.bf;
            let e = this.be;
            this.bf = a;
            this.be = b;
            if (c && (d != a || e != b)) {
                this.da("ViewportWidth", d, a);
                this.da("ViewportHeight", e, b);
            }
        }
        get viewportWidth() {
            return this.bf;
        }
        set viewportWidth(a) {
            let b = this.bf;
            this.bf = a;
            if (b != this.bf) {
                this.da("ViewportWidth", b, this.bf);
            }
        }
        get viewportHeight() {
            return this.be;
        }
        set viewportHeight(a) {
            let b = this.be;
            this.be = a;
            if (b != this.be) {
                this.da("ViewportHeight", b, this.be);
            }
        }
        get scrollTop() {
            return this.a9;
        }
        set scrollTop(a) {
            let b = this.a9;
            this.a9 = a;
            if (b != this.a9) {
                this.da("ScrollTop", b, this.a9);
            }
        }
        get scrollLeft() {
            return this.a8;
        }
        set scrollLeft(a) {
            let b = this.a8;
            this.a8 = a;
            if (b != this.a8) {
                this.da("ScrollLeft", b, this.a8);
            }
        }
        get view() {
            if (this.f == null) {
                this.f = new ScrollerView(this);
            }
            return this.f;
        }
        provideContainer(a) {
            this.view.a0(a);
            this.a9 = this.view.aa();
            this.a8 = this.view.z();
            this.dn();
            this.dq();
        }
        onDetachedFromUI() {
            this.view.ax();
        }
        onAttachedToUI() {
            this.view.au();
        }
        provideContent(a) {
            this.view.a1(a);
        }
        am(a, b, c) {
            this.p = false;
            this.o = false;
            this.q = false;
            this.view.aj();
            if (this.keyboardListener != null) {
                this.keyboardListener.onWheel();
            }
            this.dh(b, c);
            return true;
        }
        get lockScrollDirection() {
            return this.t;
        }
        set lockScrollDirection(a) {
            this.t = true;
        }
        get actualVerticalScrollbarHeight() {
            return this.ay;
        }
        set actualVerticalScrollbarHeight(a) {
            let b = this.ay;
            this.ay = a;
            if (b != this.ay) {
                this.da("ActualVerticalScrollbarHeight", b, this.ay);
            }
        }
        get actualHorizontalScrollbarWidth() {
            return this.at;
        }
        set actualHorizontalScrollbarWidth(a) {
            let b = this.at;
            this.at = a;
            if (b != this.at) {
                this.da("ActualHorizontalScrollbarWidth", b, this.at);
            }
        }
        get scrollbarStyle() {
            return this.c;
        }
        set scrollbarStyle(a) {
            let b = this.c;
            this.c = a;
            if (b != this.c) {
                this.da("ScrollbarStyle", enumGetBox(ScrollbarStyle_$type, b), enumGetBox(ScrollbarStyle_$type, this.c));
            }
        }
        get horizontalScrollbarStatus() {
            return this.a1;
        }
        set horizontalScrollbarStatus(a) {
            let b = this.a1;
            this.a1 = a;
            if (b != this.a1) {
                this.da("HorizontalScrollbarStatus", b, this.a1);
            }
        }
        get verticalScrollbarStatus() {
            return this.bc;
        }
        set verticalScrollbarStatus(a) {
            let b = this.bc;
            this.bc = a;
            if (b != this.bc) {
                this.da("VerticalOpacity", b, this.bc);
            }
        }
        get horizontalAnimation() {
            return this.h;
        }
        get verticalAnimation() {
            return this.i;
        }
        get executionContext() {
            return this._executionContext;
        }
        set executionContext(a) {
            this._executionContext = a;
        }
        get isVerticalActive() {
            return this.w;
        }
        get isHorizontalActive() {
            return this.l;
        }
        get isDraggingVBar() {
            return this._isDraggingVBar;
        }
        set isDraggingVBar(a) {
            this._isDraggingVBar = a;
        }
        get isDraggingHBar() {
            return this._isDraggingHBar;
        }
        set isDraggingHBar(a) {
            this._isDraggingHBar = a;
        }
        focus() {
            this.view.ar();
        }
        c8(a) {
            this.view.ar();
            this.q = false;
            this.o = false;
            this.p = false;
            this.n = true;
            this.dt = { $type: Point_$type, x: a.x, y: a.y };
        }
        c7(a) {
            if (this.n) {
                let b = a.y - this.dt.y;
                let c = a.x - this.dt.x;
                if (this.lockScrollDirection && !this.p) {
                    this.p = true;
                    if (b > 0 || c > 0) {
                        if (b > c) {
                            this.q = true;
                        }
                        else {
                            this.q = true;
                        }
                    }
                }
                this.dt = { $type: Point_$type, x: a.x, y: a.y };
                this.dh(-c, -b);
            }
        }
        scrollTo(a, b) {
            this.a5 = a - this.scrollLeft;
            this.a6 = b - this.scrollTop;
            this.dg();
        }
        dh(a, b) {
            this.a5 += a;
            this.a6 += b;
            this.dg();
        }
        di(a, b) {
            this.a5 += a;
            this.a6 += b;
            this.dm();
        }
        dg() {
            if (this.u) {
                return;
            }
            this.u = true;
            this.view.a2(runOn(this, this.dm));
        }
        dm() {
            this.u = false;
            let a = this.a5;
            let b = this.a6;
            this.a5 = 0;
            this.a6 = 0;
            if (this.p) {
                if (this.q) {
                    a = 0;
                }
                if (this.o) {
                    b = 0;
                }
            }
            if (a != 0) {
                this.r = false;
                this.cx();
                this.c1();
                this.r = true;
            }
            if (b != 0) {
                this.s = false;
                this.cy();
                this.c2();
                this.s = true;
            }
            let c = Math.round(this.scrollTop + b);
            let d = Math.round(this.scrollLeft + a);
            if (c < 0) {
                c = 0;
                this.view.aj();
            }
            if (d < 0) {
                d = 0;
                this.view.aj();
            }
            if (c + this.viewportHeight > this.contentHeight) {
                c = this.contentHeight - this.viewportHeight;
                if (c < 0) {
                    c = 0;
                }
                this.view.aj();
            }
            if (d + this.viewportWidth > this.contentWidth) {
                d = this.contentWidth - this.viewportWidth;
                if (d < 0) {
                    d = 0;
                }
                this.view.aj();
            }
            b = c - this.scrollTop;
            a = d - this.scrollLeft;
            if (b != 0 || a != 0) {
                try {
                    this.as = true;
                    this.y = true;
                    this.scrollTop = c;
                    this.scrollLeft = d;
                    this.dq();
                    this.dn();
                    this.y = false;
                    if (this.onScrolling != null) {
                        this.onScrolling(this, ((() => {
                            let $ret = new ScrollerScrollingEventArgs();
                            $ret.deltaX = a;
                            $ret.deltaY = b;
                            return $ret;
                        })()));
                    }
                }
                finally {
                    this.as = false;
                }
            }
        }
        dq() {
            this.dp(this.contentHeight, this.viewportHeight, this.scrollTop, true);
        }
        dn() {
            this.dp(this.contentWidth, this.viewportWidth, this.scrollLeft, false);
        }
        dp(a, b, c, d) {
            let e = Math.round((b / a) * b);
            let f = d ? this.verticalTrackStartInset : 0;
            e = e - f;
            if (e < this.minScrollbarSize) {
                e = this.minScrollbarSize;
            }
            if (e >= (b - f)) {
                if (d) {
                    this.view.at();
                }
                else {
                    this.view.as();
                }
                return;
            }
            let g = f + (e / 2);
            let h = b - (e / 2);
            let i = c / (a - b);
            let j = Math.round(g + (h - g) * i);
            if (d) {
                this.actualVerticalScrollbarHeight = e;
                this.view.a7(j, e);
            }
            else {
                this.actualHorizontalScrollbarWidth = e;
                this.view.a3(j, e);
            }
        }
        c6(a) {
            this.p = false;
            this.o = false;
            this.q = false;
            this.n = false;
        }
        cv(a, b) {
            this.horizontalScrollbarStatus = this.bo + this.h.o * (this.bz - this.bo);
        }
        cw(a, b) {
            this.verticalScrollbarStatus = this.bp + this.i.o * (this.b0 - this.bp);
        }
        cx() {
            if (this.l) {
                return;
            }
            if (this.scrollbarStyle == 1 || this.scrollbarStyle == 2) {
                if (this.h.f()) {
                    this.h.w();
                }
                this.horizontalScrollbarStatus = 1;
                if (this.m && this.r) {
                    this.m = false;
                }
            }
            this.l = true;
        }
        cy() {
            if (this.w) {
                return;
            }
            if (this.scrollbarStyle == 1 || this.scrollbarStyle == 2) {
                if (this.i.f()) {
                    this.i.w();
                }
                this.verticalScrollbarStatus = 1;
                if (this.x && this.s) {
                    this.x = false;
                }
            }
            this.w = true;
        }
        c1() {
            if (!this.l || this.isDraggingHBar) {
                return;
            }
            if (this.scrollbarStyle == 1 || this.scrollbarStyle == 2) {
                this.dk();
            }
            this.l = false;
        }
        c2() {
            if (!this.w || this.isDraggingVBar) {
                return;
            }
            if (this.scrollbarStyle == 1 || this.scrollbarStyle == 2) {
                this.dl();
            }
            this.w = false;
        }
        dk() {
            if (!this.m) {
                this.m = true;
                this.b6 = this.executionContext.getCurrentRelativeTime();
                this.executionContext.executeDelayed(runOn(this, this.cz), this.b5);
            }
            else {
                this.b6 = this.executionContext.getCurrentRelativeTime();
            }
        }
        dl() {
            if (!this.x) {
                this.x = true;
                this.b7 = this.executionContext.getCurrentRelativeTime();
                this.executionContext.executeDelayed(runOn(this, this.c0), this.b5);
            }
            else {
                this.b7 = this.executionContext.getCurrentRelativeTime();
            }
        }
        cz() {
            if (!this.m) {
                return;
            }
            let a = this.executionContext.getCurrentRelativeTime();
            if (a - this.b6 >= this.b5) {
                if (!this.h.f() && this.horizontalScrollbarStatus != 0) {
                    this.bo = this.horizontalScrollbarStatus;
                    this.bz = 0;
                    this.h.v();
                }
                this.m = false;
            }
            else {
                this.executionContext.executeDelayed(runOn(this, this.cz), (this.b5 - (a - this.b6)));
            }
        }
        c0() {
            if (!this.x) {
                return;
            }
            let a = this.executionContext.getCurrentRelativeTime();
            if (a - this.b7 >= this.b5) {
                if (!this.i.f() && this.verticalScrollbarStatus != 0) {
                    this.bp = this.verticalScrollbarStatus;
                    this.b0 = 0;
                    this.i.v();
                }
                this.x = false;
            }
            else {
                this.executionContext.executeDelayed(runOn(this, this.c0), (this.b5 - (a - this.b7)));
            }
        }
    }
    Scroller.$t = /*@__PURE__*/ markType(Scroller, 'Scroller', Base.$, [INotifyPropertyChanged_$type]);
    return Scroller;
})();
//# sourceMappingURL=ScrollerView_combined.js.map
